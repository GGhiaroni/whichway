generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum PlaceStatus {
  VISITED   
  WISHLIST  
}

model User {
  id        String   @id @default(uuid())
  clerkId   String   @unique
  email     String   @unique
  firstName String?
  lastName  String?
  imageUrl  String?
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  
  interests String[]    @default([]) 
  places    UserPlace[] 
  trips     Trip[]      
}

model UserPlace {
  id        String   @id @default(uuid())
  
  
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  
  name      String   
  country   String   
  imageUrl  String?  
  
  
  status    PlaceStatus 
  visitDate DateTime?   
  
  createdAt DateTime @default(now())

  @@index([userId]) 
}

model Trip {
  id          String   @id @default(uuid())
  userId      String
  user        User     @relation(fields: [userId], references: [id]) 
  destination String
  startDate   DateTime
  endDate     DateTime
  budget      String
  pace        String
  travelers   Json     
  interests   String[] 
  itinerary   Json       
  createdAt   DateTime @default(now())
}

model FeaturedDestination {
  id          String   @id @default(uuid())
  city        String   
  country     String   
  description String   
  imageUrl    String   
  priceLevel  String   
  createdAt   DateTime @default(now())
  rating      String  
  reviews     String
  tempSummer  String   
  tempWinter  String   
  sunnyDays   String   
  rainyDays   String   
  costBudget  String   
  costMid     String   
  costLuxury  String   
  costFlight  String   
  bestTimeValue String  
  bestTimeDesc  String  
  peakSeasonValue String 
  peakSeasonDesc String 
  offSeasonValue String 
  offSeasonDesc String 
  highlights  Highlight[]
  tips        Tip[]
}

model Highlight {
  id                    String @id @default(uuid())
  title                 String 
  imageUrl              String 
  featuredDestinationId String
  featuredDestination   FeaturedDestination @relation(fields: [featuredDestinationId], references: [id], onDelete: Cascade)
}

model Tip {
  id String @id @default(uuid())
  text String
  featuredDestinationId String
  featuredDestination   FeaturedDestination @relation(fields: [featuredDestinationId], references: [id], onDelete: Cascade)
}